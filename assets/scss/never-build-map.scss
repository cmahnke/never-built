$map-font-site: 1rem !default;

body:not(.dir-map),
body:not(.meta) {
  .main {

    .article-single,
    .section-single {

      .post-body > .map-wrapper {
        width: 100%;
        aspect-ratio: 1 / 1;
        max-width: 40%;

        @media (min-width: 768px) {
          min-height: unset;
          width: 30vw;
          margin-top: unset;

          flex-basis: 50%;
        }
      }

      .content-container {
        .map-wrapper {
          font-size: 1rem;
          clear: both;
          width: 90%;
          margin: auto;
          float: unset;
          aspect-ratio: 1 / 1;

          @media (min-width: 768px) {
            min-height: 50vh;
            aspect-ratio: unset;
            padding-top: 3rem;
          }
        }
      }

      .map-wrapper {
        float: right;
        margin-top: unset;

        margin: .6rem;

        @media (min-width: 768px) {
          margin: 2rem;
        }
      }

    }
  }
}

ol-viewport {
  --ol-subtle-background-color: white;
}

.ol-control {
  background-color: white;
  button {
    --ol-subtle-foreground-color: black;
    border-radius: unset;
    border: 0.3ex solid black;
    margin: unset;
    /*color: black;*/
  }
}

.rotate-left .icon-left:after,
.rotate-right .icon-right:after {
  background-position: center top;
}

.map-wrapper {
  display: flex;
  flex-direction: column;
  height: 100%;
  font-family: var(--text-font);
  min-height: 40vw;
  position: relative;
  border: 0.3ex solid black;
  font-size: $map-font-site;

  @media (min-width: 768px) {
    min-height: 60vh;
  }

  .ol-popup {
    display: none;
  }

  .map {
    flex: 1;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    height: 100%;
    width: 100%;

    .ol-viewport {
      border-radius: unset;
    }

    .ol-overlay-container .ol-popup {
      display: unset;
      filter: unset;
      border-radius: unset;
      border: .3ex solid #000;
      padding: 2rem .6rem 1rem .6rem;
      min-width: 30vw;
      font-size: 1.4rem;

      &:after, &:before {
        border-top-color: black;
      }

      h1 {
        margin-block-start: .6rem;
        margin-block-end: .6rem;
      }


      .popup-content {
        font-size: 1rem;
      }

      .link {
        margin-top: .8rem;
        font-size: 1rem;
      }

      a.ol-popup-closer {
        position: absolute !important;
        top: .2rem;
        right: .6rem;
        font-size: 2.2rem;
        text-decoration-style: unset !important;
        text-decoration-line: unset;
        text-decoration-thickness: unset;
        text-decoration-skip-ink: unset;
        text-decoration: none !important;

        &:after {
          content: "âœ–" !important;
          position: relative !important;
          display: block;
          background-color: var(--ol-background-color) !important;
          font-weight: bold;
          text-decoration: none;
          font-size: inherit;
          font-size: 2rem;
          mix-blend-mode: unset !important;
          transform: unset !important;
          transition: unset !important;
        }
      }
    }
  }

  & ~ .download-link {
    margin-top: 1rem;
    margin-right: unset;
  }

}

.section-post {
  .main {

    .section-single .book {
      /* See book-toc.scss */

    }
  }
}
